#!/usr/bin/env ruby

require_relative '../lib/bookbox'

def main(argv)
  subcommand = argv.shift || 'normal'
  case subcommand
  when 'scan'
    require_relative '../lib/bookbox/main/scan'
    main_scan argv, nil
  when 'scan-bunko'
    require_relative '../lib/bookbox/main/scan'
    main_scan argv, 160
  when 'scan-shinsho'
    require_relative '../lib/bookbox/main/scan'
    main_scan argv, 190
  when 'scan-a5'
    require_relative '../lib/bookbox/main/scan'
    main_scan argv, 215
  when 'jacket'
    require_relative '../lib/bookbox/main/jacket'
    main_jacket argv
  when 'server'
    require_relative '../lib/bookbox/main/server'
    main_server argv
  when 'make'
    require_relative '../lib/bookbox/main/make'
    main_make argv
  when 'images2pdf'
    require_relative '../lib/bookbox/main/images2pdf'
    main_images2pdf argv
  when 'imagedir2pdf'
    require_relative '../lib/bookbox/main/imagedir2pdf'
    main_imagedir2pdf argv
  else
    raise "unexpected subcommand: #{subcommand.inspect}"
  end
end

main ARGV
