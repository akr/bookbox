#!/usr/bin/env ruby

require_relative '../lib/bookbox'

def main(argv)
  subcommand = argv.shift || 'normal'
  case subcommand
  when 'scan'
    require_relative '../lib/bookbox/main/scan'
    main_scan argv, nil
  when 'scan-bunko'
    require_relative '../lib/bookbox/main/scan'
    main_scan argv, 160
  when 'jacket'
    require_relative '../lib/bookbox/main/jacket'
    main_jacket argv
  when 'server'
    require_relative '../lib/bookbox/main/server'
    main_server argv
  when 'make'
    require_relative '../lib/bookbox/main/make'
    main_make argv
  else
    raise "unexpected subcommand: #{subcommand.inspect}"
  end
end

main ARGV
